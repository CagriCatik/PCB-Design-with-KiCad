"use strict";(self.webpackChunkPCB_Design=self.webpackChunkPCB_Design||[]).push([[6611],{8514:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"projects/project-stm32/overview","title":"1. Project Overview & Setup","description":"1.1 Board Features","source":"@site/docs/09_projects/05_project-stm32/01_overview.md","sourceDirName":"09_projects/05_project-stm32","slug":"/projects/project-stm32/overview","permalink":"/PCB-Design-with-KiCad/docs/projects/project-stm32/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/CagriCatik/PCB-Design-with-KiCad/tree/edit/main/webpage/docs/09_projects/05_project-stm32/01_overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"projectsSidebar","previous":{"title":"Project: STM32","permalink":"/PCB-Design-with-KiCad/docs/category/project-stm32"},"next":{"title":"2. Schematic Design Basics","permalink":"/PCB-Design-with-KiCad/docs/projects/project-stm32/schematic"}}');var r=n(4848),a=n(8453);const s={},o="1. Project Overview & Setup",c={},l=[{value:"1.1 Board Features",id:"11-board-features",level:2},{value:"1.2 Tools",id:"12-tools",level:2},{value:"1.3 Design Flow",id:"13-design-flow",level:2},{value:"1.3.1 Schematic Design",id:"131-schematic-design",level:3},{value:"1.3.2 PCB Layout",id:"132-pcb-layout",level:3},{value:"1.3.3 Manufacturing (PCBWay)",id:"133-manufacturing-pcbway",level:3},{value:"1.4 Key Design Validation Metrics",id:"14-key-design-validation-metrics",level:2},{value:"Power Integrity",id:"power-integrity",level:3},{value:"RF Performance",id:"rf-performance",level:3},{value:"Signal Integrity",id:"signal-integrity",level:3}];function d(e){const i={h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"1-project-overview--setup",children:"1. Project Overview & Setup"})}),"\n",(0,r.jsx)(i.h2,{id:"11-board-features",children:"1.1 Board Features"}),"\n",(0,r.jsxs)(i.p,{children:["The STM32 WB55CEU-based Bluetooth board is meticulously engineered to deliver robust performance and versatile functionality, integrating several core components essential for advanced embedded applications. Central to its architecture is the ",(0,r.jsx)(i.strong,{children:"STM32 WB55CEU Microcontroller"}),", which features a dual-core configuration comprising an ARM Cortex-M4 operating at 64 MHz and an ARM Cortex-M0+ operating at 32 MHz. This dual-core setup facilitates efficient multitasking and optimized power consumption, catering to both high-performance and low-power requirements."]}),"\n",(0,r.jsx)(i.p,{children:"The microcontroller incorporates an integrated Bluetooth 5.0 Low Energy (BLE) RF subsystem, enabling seamless wireless communication with enhanced data rates, extended range, and improved coexistence with other wireless technologies. Memory resources include 1 MB of Flash and 256 KB of SRAM, providing ample space for complex firmware and real-time data processing. Additionally, the microcontroller is equipped with hardware cryptographic acceleration, ensuring secure data transmission and storage, which is critical for applications requiring stringent security measures."}),"\n",(0,r.jsx)(i.p,{children:"The STM32 WB55CEU is housed in a QFN-48 package with dimensions of 7\xd77 mm, featuring a 49th pin designated as an exposed thermal pad. This thermal management feature is vital for dissipating heat efficiently, thereby maintaining the reliability and longevity of the microcontroller during prolonged operation."}),"\n",(0,r.jsxs)(i.p,{children:["Complementing the microcontroller is the ",(0,r.jsx)(i.strong,{children:"USB Type-C Connector"}),", which supports dual-role power delivery (sink/source) and provides a full-speed USB 2.0 data interface. The inclusion of integrated Electrostatic Discharge (ESD) protection, specifically the ST USBLC6-2SC6 device, safeguards the D+ and D\u2013 data lines against voltage spikes, enhancing the board's resilience in diverse operating environments."]}),"\n",(0,r.jsxs)(i.p,{children:["The ",(0,r.jsx)(i.strong,{children:"Tag Connect SWD Interface"})," facilitates programming and debugging through a 6-pin ARM Serial Wire Debug (SWD) header (TC2050-IDC-NL). This interface is compatible with ST-LINK/V2 protocols, enabling efficient firmware upload and real-time tracing capabilities, which are indispensable for iterative development and troubleshooting."]}),"\n",(0,r.jsxs)(i.p,{children:["For wireless communication, the board features a ",(0,r.jsx)(i.strong,{children:"UFL Antenna Interface"})," designed with a 50\u03a9 impedance-matched RF output. The RF output employs a \u03c0-network comprising 0.8 pF, 2.7 nH, and 0.3 pF components, coupled with a TDK DLP11SN021SK2 low-pass filter operating in the 2.4\u20132.5 GHz bandpass range. This configuration effectively suppresses harmonics, mitigating electromagnetic interference (EMI) and ensuring optimal signal integrity for BLE operations."]}),"\n",(0,r.jsx)(i.h2,{id:"12-tools",children:"1.2 Tools"}),"\n",(0,r.jsxs)(i.p,{children:["The design and development of the STM32 WB55CEU-based Bluetooth board leverage sophisticated software tools to ensure precision and efficiency. ",(0,r.jsx)(i.strong,{children:"KiCad 7"})," serves as the primary tool for schematic capture and PCB layout. It offers integrated SPICE simulation capabilities, allowing for comprehensive analysis and validation of circuit behavior prior to fabrication. KiCad 7's support for custom symbol and footprint libraries, particularly for RF components such as UFL connectors, ensures that the board\u2019s high-frequency pathways are accurately represented. Furthermore, KiCad 7 incorporates design rule checks (DRC) tailored for impedance-controlled routing and RF isolation, which are critical for maintaining signal integrity and minimizing crosstalk in high-speed designs."]}),"\n",(0,r.jsxs)(i.p,{children:["For firmware development and hardware configuration, the ",(0,r.jsx)(i.strong,{children:"STM32Cube IDE"})," is employed. This integrated development environment facilitates the configuration of pin multiplexing for the STM32 WB55CEU\u2019s General-Purpose Input/Output (GPIO) pins, allowing for flexible assignment of peripheral functions. The IDE also manages clock tree initialization, utilizing a 32 MHz High-Speed External (HSE) oscillator and a 32.768 kHz Low-Speed External (LSE) oscillator to support both high-frequency operations and precise Real-Time Clock (RTC) functionalities. Additionally, the STM32Cube IDE generates peripheral drivers for essential interfaces, including USB, the BLE stack, and the RTC, streamlining the development process and ensuring compatibility with the hardware design."]}),"\n",(0,r.jsx)(i.h2,{id:"13-design-flow",children:"1.3 Design Flow"}),"\n",(0,r.jsx)(i.p,{children:"The design flow for the STM32 WB55CEU-based Bluetooth board encompasses several critical stages, including schematic design, PCB layout, and manufacturing, each meticulously executed to achieve a high-performance and reliable final product."}),"\n",(0,r.jsx)(i.h3,{id:"131-schematic-design",children:"1.3.1 Schematic Design"}),"\n",(0,r.jsx)(i.p,{children:"The schematic design phase prioritizes robust power distribution, efficient RF subsystem integration, and a stable clock system. Power distribution is managed through a 3.3V regulation circuit utilizing the MIC5365-3.3YD Low Dropout Regulator (LDO), capable of supplying up to 150 mA with a maximum input voltage of 5.5V. To support low-power modes, a Switched-Mode Power Supply (SMPS) configuration is implemented, incorporating a 10 \xb5H inductor and a 4.7 \xb5F output capacitor, which collectively enhance power efficiency and reduce energy consumption during idle states."}),"\n",(0,r.jsx)(i.p,{children:"Decoupling is addressed through a strategic topology that includes 100 nF Multilayer Ceramic Capacitors (MLCC) placed at each VDD pin to filter high-frequency noise, complemented by a 1 \xb5F bulk capacitor situated at the VDDA pin to stabilize the analog supply voltage. This approach ensures minimal voltage ripple and enhances overall power integrity across the board."}),"\n",(0,r.jsx)(i.p,{children:"The RF subsystem is meticulously designed with a \u03c0-network matching circuit tailored for the 2.4 GHz BLE frequency. The network consists of 0.8 pF, 2.7 nH, and 0.3 pF components, which collectively optimize impedance matching and minimize signal reflections. The UFL footprint, specifically the Hirose U.FL connector, is integrated with ground-plane stitching to mitigate EMI, thereby ensuring clean and reliable wireless communication."}),"\n",(0,r.jsx)(i.p,{children:"Clock system stability is achieved through the incorporation of a 32 MHz MEMS oscillator (NX3225GD) paired with 10 pF load capacitors, providing a precise and stable reference for the microcontroller\u2019s operations. Additionally, a 32.768 kHz crystal oscillator (NX2012SA) supports the RTC and low-power modes, facilitating accurate timekeeping and efficient power management during periods of reduced activity."}),"\n",(0,r.jsx)(i.h3,{id:"132-pcb-layout",children:"1.3.2 PCB Layout"}),"\n",(0,r.jsx)(i.p,{children:"The PCB layout adheres to a four-layer stackup configuration, comprising Top, Ground (GND), Power (PWR), and Bottom layers, constructed using an FR-4 substrate with a relative permittivity (\u03b5\u1d63) of 4.5. The inclusion of a 0.2 mm prepreg layer serves to minimize interlayer capacitance, which is crucial for maintaining signal integrity in high-frequency circuits."}),"\n",(0,r.jsx)(i.p,{children:"Critical routing paths are designed with precision to ensure optimal performance:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"RF Trace"}),": Implemented as a 50\u03a9 coplanar waveguide with a width of 0.3 mm and a gap of 0.15 mm on the Top layer, the RF trace is engineered to support high-frequency signal transmission with minimal loss and reflection."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"USB D+/D\u2013 Lines"}),": Routed as 90\u03a9 differential pairs with a trace width of 0.2 mm and a spacing of 0.1 mm, these lines are designed to maintain differential signaling integrity, reducing susceptibility to external noise and ensuring compliance with USB 2.0 standards."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"SWD Signals"}),": The Serial Wire Debug (SWD) signals are routed with a trace width of 10 mils and are flanked by guard traces. This configuration enhances noise immunity, protecting the integrity of programming and debugging signals from electromagnetic interference."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"133-manufacturing-pcbway",children:"1.3.3 Manufacturing (PCBWay)"}),"\n",(0,r.jsx)(i.p,{children:"The manufacturing process is conducted through PCBWay, adhering to stringent fabrication standards to ensure high-quality output:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Gerber Files"}),": The design is translated into layer-specific Gerber files, encompassing copper layers, solder mask layers, and silkscreen layers. These files comply with a 0.1 mm annular ring specification, ensuring reliable electrical connections and mechanical stability for plated through-holes (PTH) and vias."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Drill Files"}),": Drill files are provided in Excellon format, specifying precise hole locations and sizes for PTH and vias, which are critical for establishing robust electrical interconnections between layers."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Assembly"}),": Surface-Mount Technology (SMT) is employed for the assembly of 0402 passive components, maintaining a placement tolerance of 10 mils to ensure accurate positioning and soldering. The reflow soldering process utilizes a Pb-free SAC305 alloy, reaching a peak temperature of 245\xb0C, which facilitates reliable solder joints while complying with environmental regulations regarding lead usage."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"14-key-design-validation-metrics",children:"1.4 Key Design Validation Metrics"}),"\n",(0,r.jsx)(i.p,{children:"Ensuring the STM32 WB55CEU-based Bluetooth board meets stringent performance and reliability standards involves rigorous validation against key design metrics in power integrity, RF performance, and signal integrity."}),"\n",(0,r.jsx)(i.h3,{id:"power-integrity",children:"Power Integrity"}),"\n",(0,r.jsx)(i.p,{children:"The power integrity of the board is evaluated by monitoring the 3.3V rail ripple, which must remain at or below 50 mV peak-to-peak (mVpp) within a 20 MHz bandwidth. This criterion ensures stable power delivery to the microcontroller and peripherals, minimizing potential disruptions caused by voltage fluctuations. Additionally, the Switched-Mode Power Supply (SMPS) is required to achieve an efficiency of at least 85% under a 100 mA load, which is indicative of effective power management and reduced energy loss during operation."}),"\n",(0,r.jsx)(i.h3,{id:"rf-performance",children:"RF Performance"}),"\n",(0,r.jsx)(i.p,{children:"The RF subsystem's performance is assessed through two primary metrics:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Return Loss (S11)"}),": The return loss must be \u2264 \u201310 dB at 2.45 GHz, indicating that the majority of the incident power is being effectively transmitted through the antenna, with minimal reflection. This parameter is crucial for maximizing wireless communication efficiency and range."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Radiated Power"}),": In BLE transmission (Tx) mode, the board must achieve a radiated power of +3 dBm. This level of output power ensures sufficient signal strength for reliable communication within typical BLE operating ranges, balancing performance with power consumption."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"signal-integrity",children:"Signal Integrity"}),"\n",(0,r.jsx)(i.p,{children:"Maintaining signal integrity is paramount for the reliable operation of high-speed interfaces:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"USB Eye Diagram"}),": The USB signals must comply with the USB 2.0 full-speed eye diagram mask, ensuring that the signal transitions are clean and free from excessive jitter or distortion. Compliance with this standard is essential for maintaining data transmission reliability and compatibility with USB peripherals."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"SWD Clock Jitter"}),": The Serial Wire Debug (SWD) clock must exhibit jitter of \u2264 500 picoseconds (ps) at a frequency of 10 MHz. Low jitter is critical for accurate timing and synchronization during programming and debugging operations, preventing errors and ensuring precise control over the microcontroller."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"This documentation establishes a comprehensive and rigorous framework for replicating the STM32 WB55CEU-based Bluetooth board design. It emphasizes strict adherence to STM32 hardware guidelines (as detailed in AN5165) and incorporates best practices from KiCad 7 for mixed-signal layouts, thereby ensuring a high level of reliability, performance, and manufacturability in advanced PCB designs."})]})}function h(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>s,x:()=>o});var t=n(6540);const r={},a=t.createContext(r);function s(e){const i=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(a.Provider,{value:i},e.children)}}}]);