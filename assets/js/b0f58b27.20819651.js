"use strict";(self.webpackChunkPCB_Design=self.webpackChunkPCB_Design||[]).push([[3125],{265:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"projects/project-stm32/programming_debugging","title":"6. Programming & Debugging","description":"6.1 Tag Connect SWD Interface","source":"@site/docs/09_projects/05_project-stm32/06_programming_debugging.md","sourceDirName":"09_projects/05_project-stm32","slug":"/projects/project-stm32/programming_debugging","permalink":"/PCB-Design-with-KiCad/docs/projects/project-stm32/programming_debugging","draft":false,"unlisted":false,"editUrl":"https://github.com/CagriCatik/PCB-Design-with-KiCad/tree/edit/main/webpage/docs/09_projects/05_project-stm32/06_programming_debugging.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{},"sidebar":"projectsSidebar","previous":{"title":"5. Oscillators","permalink":"/PCB-Design-with-KiCad/docs/projects/project-stm32/oscillator"},"next":{"title":"7. USB-C Power & Data Interface","permalink":"/PCB-Design-with-KiCad/docs/projects/project-stm32/usb-c"}}');var t=n(4848),a=n(8453);const r={},l="6. Programming & Debugging",c={},d=[{value:"6.1 Tag Connect SWD Interface",id:"61-tag-connect-swd-interface",level:2},{value:"6.2 NRST Debouncing Circuit",id:"62-nrst-debouncing-circuit",level:2},{value:"6.3 Boot Mode Configuration",id:"63-boot-mode-configuration",level:2},{value:"6.4 SWD Protocol Configuration",id:"64-swd-protocol-configuration",level:2},{value:"6.5 Design Validation",id:"65-design-validation",level:2},{value:"6.6 Critical Design Rules",id:"66-critical-design-rules",level:2},{value:"Conclusion",id:"conclusion",level:2}];function o(e){const s={annotation:"annotation",h1:"h1",h2:"h2",header:"header",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msub:"msub",mtext:"mtext",p:"p",semantics:"semantics",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"6-programming--debugging",children:"6. Programming & Debugging"})}),"\n",(0,t.jsx)(s.h2,{id:"61-tag-connect-swd-interface",children:"6.1 Tag Connect SWD Interface"}),"\n",(0,t.jsx)(s.p,{children:"The STM32 WB55CEU microcontroller incorporates the TC2050-IDC-NL connector to facilitate ARM Serial Wire Debug (SWD) access, enabling efficient firmware programming and real-time debugging capabilities. This interface is critical for the development and maintenance of firmware, providing essential signals for data transfer, clock synchronization, and system reset."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Pinout:"})}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Pin"}),(0,t.jsx)(s.th,{children:"Signal"}),(0,t.jsx)(s.th,{children:"Function"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"1"}),(0,t.jsx)(s.td,{children:"VDD"}),(0,t.jsx)(s.td,{children:"3.3V supply (\u226450 mA)"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"2"}),(0,t.jsx)(s.td,{children:"SWDIO"}),(0,t.jsx)(s.td,{children:"Bidirectional data"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"3"}),(0,t.jsx)(s.td,{children:"SWCLK"}),(0,t.jsx)(s.td,{children:"10 MHz clock"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"4"}),(0,t.jsx)(s.td,{children:"SWO"}),(0,t.jsx)(s.td,{children:"Serial trace output (optional)"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"5"}),(0,t.jsx)(s.td,{children:"NRST"}),(0,t.jsx)(s.td,{children:"Active-low reset"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"6"}),(0,t.jsx)(s.td,{children:"GND"}),(0,t.jsx)(s.td,{children:"Ground reference"})]})]})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Signal Integrity:"})}),"\n",(0,t.jsx)(s.p,{children:"Ensuring signal integrity within the SWD interface is paramount to reliable debugging and programming operations. The SWDIO and SWCLK lines are routed as 10 mil traces with a controlled impedance of 50 \u03a9, utilizing a coplanar waveguide configuration with a 0.1 mm gap to the ground plane. This design minimizes signal reflections and preserves signal quality at high frequencies."}),"\n",(0,t.jsx)(s.p,{children:"To further enhance signal integrity, guard traces are maintained at a spacing of 0.3 mm from adjacent digital nets, reducing the potential for electromagnetic interference (EMI) and crosstalk. Additionally, series resistors of 22 \u03a9 are incorporated on the SWDIO and SWCLK lines to dampen reflections, ensuring stable and reliable signal transmission during high-speed operations."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"62-nrst-debouncing-circuit",children:"6.2 NRST Debouncing Circuit"}),"\n",(0,t.jsx)(s.p,{children:"The NRST (reset) signal is critical for initializing and resetting the microcontroller. To ensure reliable operation, the NRST signal is conditioned through a debouncing circuit that mitigates transient glitches and noise, preventing unintended resets."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"RC Network:"})}),"\n",(0,t.jsx)(s.p,{children:"The debouncing circuit comprises a resistor-capacitor (RC) network designed to filter out noise and stabilize the NRST signal:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Capacitor (C_NRST):"})," A 100 nF X7R MLCC in an 0402 package rated at 10V is placed within 2 mm of the MCU's NRST pin. This capacitor smooths out rapid voltage fluctuations, effectively suppressing glitches with durations shorter than 1 \xb5s."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsxs)(s.strong,{children:["Time Constant (",(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsx)(s.mrow,{children:(0,t.jsx)(s.mi,{children:"\u03c4"})}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\tau"})]})})}),(0,t.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.4306em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.1132em"},children:"\u03c4"})]})})]}),"):"]})}),"\n",(0,t.jsx)(s.p,{children:"The time constant of the RC network is calculated as:"}),"\n",(0,t.jsx)(s.span,{className:"katex-display",children:(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsxs)(s.mrow,{children:[(0,t.jsx)(s.mi,{children:"\u03c4"}),(0,t.jsx)(s.mo,{children:"="}),(0,t.jsxs)(s.msub,{children:[(0,t.jsx)(s.mi,{children:"R"}),(0,t.jsx)(s.mtext,{children:"MCU"})]}),(0,t.jsx)(s.mo,{children:"\u22c5"}),(0,t.jsxs)(s.msub,{children:[(0,t.jsx)(s.mi,{children:"C"}),(0,t.jsx)(s.mtext,{children:"NRST"})]}),(0,t.jsx)(s.mo,{children:"\u2248"}),(0,t.jsx)(s.mn,{children:"40"}),(0,t.jsx)(s.mtext,{children:"\u2009"}),(0,t.jsx)(s.mtext,{children:"k\u03a9"}),(0,t.jsx)(s.mo,{children:"\u22c5"}),(0,t.jsx)(s.mn,{children:"100"}),(0,t.jsx)(s.mtext,{children:"\u2009"}),(0,t.jsx)(s.mtext,{children:"nF"}),(0,t.jsx)(s.mo,{children:"="}),(0,t.jsx)(s.mn,{children:"4"}),(0,t.jsx)(s.mtext,{children:"\u2009"}),(0,t.jsx)(s.mtext,{children:"ms"})]}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"\\tau = R_{\\text{MCU}} \\cdot C_{\\text{NRST}} \\approx 40 \\, \\text{k\u03a9} \\cdot 100 \\, \\text{nF} = 4 \\, \\text{ms}"})]})})}),(0,t.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.4306em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.1132em"},children:"\u03c4"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(s.span,{className:"mrel",children:"="}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,t.jsx)(s.span,{className:"msupsub",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.3283em"},children:(0,t.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0077em",marginRight:"0.05em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:(0,t.jsx)(s.span,{className:"mord text mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:"MCU"})})})})]})}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(s.span,{})})})]})})]}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(s.span,{className:"mbin",children:"\u22c5"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,t.jsx)(s.span,{className:"msupsub",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.3283em"},children:(0,t.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:(0,t.jsx)(s.span,{className:"mord text mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:"NRST"})})})})]})}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(s.span,{})})})]})})]}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(s.span,{className:"mrel",children:"\u2248"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.6944em"}}),(0,t.jsx)(s.span,{className:"mord",children:"40"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(s.span,{className:"mord text",children:(0,t.jsx)(s.span,{className:"mord",children:"k\u03a9"})}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(s.span,{className:"mbin",children:"\u22c5"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,t.jsx)(s.span,{className:"mord",children:"100"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(s.span,{className:"mord text",children:(0,t.jsx)(s.span,{className:"mord",children:"nF"})}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(s.span,{className:"mrel",children:"="}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,t.jsx)(s.span,{className:"mord",children:"4"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(s.span,{className:"mord text",children:(0,t.jsx)(s.span,{className:"mord",children:"ms"})})]})]})]})}),"\n",(0,t.jsx)(s.p,{children:"This time constant ensures that transient noise does not propagate through the reset line, maintaining stable MCU operation."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Layout Rules:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Direct Connection:"})," The capacitor must be connected directly to the MCU's NRST pin without intermediary vias to preserve the integrity of the debouncing filter."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Ground Return Path:"})," A dedicated via connects the capacitor to the bottom-layer ground plane, ensuring a low-impedance return path and minimizing inductive effects that could degrade the filter's performance."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"63-boot-mode-configuration",children:"6.3 Boot Mode Configuration"}),"\n",(0,t.jsx)(s.p,{children:"Configuring the boot mode of the STM32 WB55CEU microcontroller is essential for controlling the startup behavior, particularly for selecting between normal boot and programming modes."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"PH3 (Boot0) Circuit:"})}),"\n",(0,t.jsx)(s.p,{children:"The PH3 pin determines the boot mode based on its voltage level during reset. The circuit design ensures a reliable and noise-immune method for mode selection."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Pull-Down Resistor:"})," A 5.1 k\u03a9 \xb11% resistor in an 0402 package with a power rating of 50 mW is connected to PH3. This resistor ensures that the default state of PH3 is low (V_IL = 0.3 \xd7 VDD = 0.99V), enforcing a normal boot mode during power-up."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Momentary Switch:"})," A momentary switch is connected to PH3, allowing the user to pull the pin high (V_IH = 0.6 \xd7 VDD = 1.98V) when pressed. This action triggers the bootloader mode, enabling firmware programming."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Debounce Filter:"})," A 100 nF capacitor (C_BOOT) is placed in parallel with the pull-down resistor to create a debounce filter with a time constant of:"]}),"\n",(0,t.jsx)(s.span,{className:"katex-display",children:(0,t.jsxs)(s.span,{className:"katex",children:[(0,t.jsx)(s.span,{className:"katex-mathml",children:(0,t.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,t.jsxs)(s.semantics,{children:[(0,t.jsxs)(s.mrow,{children:[(0,t.jsxs)(s.msub,{children:[(0,t.jsx)(s.mi,{children:"t"}),(0,t.jsx)(s.mtext,{children:"debounce"})]}),(0,t.jsx)(s.mo,{children:"="}),(0,t.jsx)(s.mi,{children:"R"}),(0,t.jsx)(s.mo,{children:"\u22c5"}),(0,t.jsx)(s.mi,{children:"C"}),(0,t.jsx)(s.mo,{children:"="}),(0,t.jsx)(s.mn,{children:"5.1"}),(0,t.jsx)(s.mtext,{children:"\u2009"}),(0,t.jsx)(s.mtext,{children:"k\u03a9"}),(0,t.jsx)(s.mo,{children:"\u22c5"}),(0,t.jsx)(s.mn,{children:"100"}),(0,t.jsx)(s.mtext,{children:"\u2009"}),(0,t.jsx)(s.mtext,{children:"nF"}),(0,t.jsx)(s.mo,{children:"="}),(0,t.jsx)(s.mn,{children:"510"}),(0,t.jsx)(s.mtext,{children:"\u2009"}),(0,t.jsx)(s.mi,{children:"\u03bc"}),(0,t.jsx)(s.mtext,{children:"s"})]}),(0,t.jsx)(s.annotation,{encoding:"application/x-tex",children:"t_{\\text{debounce}} = R \\cdot C = 5.1 \\, \\text{k\u03a9} \\cdot 100 \\, \\text{nF} = 510 \\, \\mu\\text{s}"})]})})}),(0,t.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.7651em",verticalAlign:"-0.15em"}}),(0,t.jsxs)(s.span,{className:"mord",children:[(0,t.jsx)(s.span,{className:"mord mathnormal",children:"t"}),(0,t.jsx)(s.span,{className:"msupsub",children:(0,t.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,t.jsxs)(s.span,{className:"vlist-r",children:[(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.3361em"},children:(0,t.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,t.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,t.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:(0,t.jsx)(s.span,{className:"mord text mtight",children:(0,t.jsx)(s.span,{className:"mord mtight",children:"debounce"})})})})]})}),(0,t.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,t.jsx)(s.span,{className:"vlist-r",children:(0,t.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,t.jsx)(s.span,{})})})]})})]}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(s.span,{className:"mrel",children:"="}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(s.span,{className:"mbin",children:"\u22c5"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(s.span,{className:"mrel",children:"="}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.6944em"}}),(0,t.jsx)(s.span,{className:"mord",children:"5.1"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(s.span,{className:"mord text",children:(0,t.jsx)(s.span,{className:"mord",children:"k\u03a9"})}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,t.jsx)(s.span,{className:"mbin",children:"\u22c5"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,t.jsx)(s.span,{className:"mord",children:"100"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(s.span,{className:"mord text",children:(0,t.jsx)(s.span,{className:"mord",children:"nF"})}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,t.jsx)(s.span,{className:"mrel",children:"="}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,t.jsxs)(s.span,{className:"base",children:[(0,t.jsx)(s.span,{className:"strut",style:{height:"0.8389em",verticalAlign:"-0.1944em"}}),(0,t.jsx)(s.span,{className:"mord",children:"510"}),(0,t.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,t.jsx)(s.span,{className:"mord mathnormal",children:"\u03bc"}),(0,t.jsx)(s.span,{className:"mord text",children:(0,t.jsx)(s.span,{className:"mord",children:"s"})})]})]})]})}),"\n",(0,t.jsx)(s.p,{children:"This filter prevents mechanical switch bounce from causing false triggers, ensuring that only deliberate button presses alter the boot mode."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"64-swd-protocol-configuration",children:"6.4 SWD Protocol Configuration"}),"\n",(0,t.jsx)(s.p,{children:"The SWD (Serial Wire Debug) protocol is configured to optimize programming and debugging performance, ensuring efficient communication between the development environment and the microcontroller."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"STM32CubeProgrammer Settings:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Clock Speed:"})," The SWD interface operates at a default clock speed of 4 MHz. For longer cable lengths (\u2264100 mm), the clock speed can be increased to 10 MHz to enhance data transfer rates, provided that signal integrity is maintained."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"NRST Pulse Width:"})," The reset pulse width is configured to a minimum of 100 \xb5s, ensuring that the microcontroller reliably recognizes and responds to reset signals. This configuration is essential for consistent and predictable reset behavior during debugging sessions."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Fault Protection:"})}),"\n",(0,t.jsx)(s.p,{children:"To protect the SWD lines from voltage transients and electrostatic discharge (ESD), a Schottky diode (BAT54S) is installed between the NRST line and VDD. This diode clamps negative transients, preventing them from propagating into the microcontroller and safeguarding against potential damage."}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"65-design-validation",children:"6.5 Design Validation"}),"\n",(0,t.jsx)(s.p,{children:"Validating the programming and debugging interfaces is critical to ensure reliable operation and adherence to design specifications."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"SWD Signal Quality:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Rise Time:"})," The SWDIO and SWCLK signals must achieve a rise time of \u2264 5 ns between 20% and 80% of the voltage level at a 10 MHz clock frequency. Rapid rise times are necessary to maintain signal integrity and minimize timing errors during high-speed data transfers."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Overshoot:"})," Signal overshoot on the SWD lines must not exceed 10% of VDD (3.3V). Excessive overshoot can cause signal integrity issues, leading to misinterpretation of data and unreliable debugging operations."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"NRST Functionality:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Reset Pulse:"})," The NRST line must generate a low pulse of 100 \xb5s duration, verified using an oscilloscope with a 1 M\u03a9 probe. This ensures that the reset signal is adequately long to trigger a reliable reset of the microcontroller without being susceptible to noise-induced glitches."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Boot Mode Entry:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"PH3 Voltage:"})," Upon pressing the boot mode selection button, the voltage at the PH3 pin must reach \u22652.5V, as measured directly at the MCU pin. This ensures that the bootloader mode is reliably entered when required, facilitating seamless firmware programming and debugging."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"66-critical-design-rules",children:"6.6 Critical Design Rules"}),"\n",(0,t.jsx)(s.p,{children:"Adhering to critical design rules is essential for maintaining the integrity and reliability of the programming and debugging interfaces."}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"SWD Connector Placement:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Proximity to MCU:"})," The SWD connector must be placed within 30 mm of the microcontroller to minimize trace inductance and maintain signal integrity. Short trace lengths reduce the risk of signal degradation and timing mismatches."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Trace Routing:"})," Avoid routing SWD traces over split planes or alongside high-current paths, which can introduce noise and interfere with the SWD signals. Maintaining a clean routing environment is crucial for preserving signal quality."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"ESD Protection:"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"TVS Diode Array:"})," A Transient Voltage Suppression (TVS) diode array, such as the ESDALCL6-2SC6, is installed on the SWD signals to provide robust protection against electrostatic discharge events. The TVS diodes are selected to comply with IEC 61000-4-2 Level 4 standards, ensuring that the interface can withstand high-energy ESD events without sustaining damage."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsx)(s.p,{children:"The programming and debugging infrastructure of the STM32 WB55CEU microcontroller is meticulously designed to provide robust and reliable access for firmware development and system troubleshooting. By implementing a well-defined SWD interface with stringent signal integrity measures, incorporating effective reset signal conditioning, and ensuring comprehensive protection against electrical faults, the design facilitates seamless firmware programming and real-time debugging. Adherence to critical design rules and thorough validation ensures that the programming and debugging interfaces operate reliably under industrial conditions, aligning with STM32CubeIDE debugging requirements (AN4989) and supporting the development of high-performance embedded applications."})]})}function h(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>l});var i=n(6540);const t={},a=i.createContext(t);function r(e){const s=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(a.Provider,{value:s},e.children)}}}]);