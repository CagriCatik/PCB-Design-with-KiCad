<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-projects/project-stm32/rf_design" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">4. RF Section Design | Electronics &amp; PCB Design</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://CagriCatik.github.io/PCB-Design-with-KiCad/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://CagriCatik.github.io/PCB-Design-with-KiCad/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://CagriCatik.github.io/PCB-Design-with-KiCad/docs/projects/project-stm32/rf_design"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="4. RF Section Design | Electronics &amp; PCB Design"><meta data-rh="true" name="description" content="4.1 Impedance Matching Network"><meta data-rh="true" property="og:description" content="4.1 Impedance Matching Network"><link data-rh="true" rel="icon" href="/PCB-Design-with-KiCad/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://CagriCatik.github.io/PCB-Design-with-KiCad/docs/projects/project-stm32/rf_design"><link data-rh="true" rel="alternate" href="https://CagriCatik.github.io/PCB-Design-with-KiCad/docs/projects/project-stm32/rf_design" hreflang="en"><link data-rh="true" rel="alternate" href="https://CagriCatik.github.io/PCB-Design-with-KiCad/docs/projects/project-stm32/rf_design" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/PCB-Design-with-KiCad/blog/rss.xml" title="Electronics &amp; PCB Design RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/PCB-Design-with-KiCad/blog/atom.xml" title="Electronics &amp; PCB Design Atom Feed"><link rel="stylesheet" href="/PCB-Design-with-KiCad/assets/css/styles.524557fc.css">
<script src="/PCB-Design-with-KiCad/assets/js/runtime~main.e827b521.js" defer="defer"></script>
<script src="/PCB-Design-with-KiCad/assets/js/main.3242543a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/PCB-Design-with-KiCad/"><div class="navbar__logo"><img src="/PCB-Design-with-KiCad/img/logo.png" alt="pcb logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/PCB-Design-with-KiCad/img/logo.png" alt="pcb logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"> </b></a><a class="navbar__item navbar__link" href="/PCB-Design-with-KiCad/docs/getting_started/">Getting Started</a><a class="navbar__item navbar__link" href="/PCB-Design-with-KiCad/docs/pcb_design/what-is-a-pcb">PCB Design</a><a class="navbar__item navbar__link" href="/PCB-Design-with-KiCad/docs/kicad/introduction">KiCad</a><a class="navbar__item navbar__link" href="/PCB-Design-with-KiCad/docs/schematic-design/introduction">Schematic</a><a class="navbar__item navbar__link" href="/PCB-Design-with-KiCad/docs/layout/introduction">Layout</a><a class="navbar__item navbar__link" href="/PCB-Design-with-KiCad/docs/design_principles/introduction">Design Principles</a><a class="navbar__item navbar__link" href="/PCB-Design-with-KiCad/docs/category/schematic">Design Workflow</a><a class="navbar__item navbar__link" href="/PCB-Design-with-KiCad/docs/symbols_eeschema/introduction">Symbols Eeschema</a><a class="navbar__item navbar__link" href="/PCB-Design-with-KiCad/docs/footprints_pcbnew/introduction">Footprints Pcbnew</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/PCB-Design-with-KiCad/docs/projects/getting-started">Projects</a><a class="navbar__item navbar__link" href="/PCB-Design-with-KiCad/docs/recipes/getting-started">Recipes</a><a class="navbar__item navbar__link" href="/PCB-Design-with-KiCad/docs/category/introduction">Electronics</a><a href="https://github.com/CagriCatik/PCB-Design-with-KiCad" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/PCB-Design-with-KiCad/docs/projects/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/PCB-Design-with-KiCad/docs/category/project-voltage-regulator">Project: Voltage Regulator</a><button aria-label="Expand sidebar category &#x27;Project: Voltage Regulator&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/PCB-Design-with-KiCad/docs/category/project-mcu-datalogger">Project: MCU Datalogger</a><button aria-label="Expand sidebar category &#x27;Project: MCU Datalogger&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/PCB-Design-with-KiCad/docs/category/project-breadboard-power-supply">Project: Breadboard Power Supply</a><button aria-label="Expand sidebar category &#x27;Project: Breadboard Power Supply&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/PCB-Design-with-KiCad/docs/category/project-esp32">Project: ESP32</a><button aria-label="Expand sidebar category &#x27;Project: ESP32&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/PCB-Design-with-KiCad/docs/category/project-stm32">Project: STM32</a><button aria-label="Collapse sidebar category &#x27;Project: STM32&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/PCB-Design-with-KiCad/docs/projects/project-stm32/overview">1. Project Overview &amp; Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/PCB-Design-with-KiCad/docs/projects/project-stm32/schematic">2. Schematic Design Basics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/PCB-Design-with-KiCad/docs/projects/project-stm32/stm32">3. STM32 WB55 Microcontroller Power Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/PCB-Design-with-KiCad/docs/projects/project-stm32/rf_design">4. RF Section Design</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/PCB-Design-with-KiCad/docs/projects/project-stm32/oscillator">5. Oscillators</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/PCB-Design-with-KiCad/docs/projects/project-stm32/programming_debugging">6. Programming &amp; Debugging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/PCB-Design-with-KiCad/docs/projects/project-stm32/usb-c">7. USB-C Power &amp; Data Interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/PCB-Design-with-KiCad/docs/projects/project-stm32/peripherials">8. Peripherals</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/PCB-Design-with-KiCad/docs/projects/project-stm32/erc_footprints">9. ERC &amp; Footprints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/PCB-Design-with-KiCad/docs/projects/project-stm32/net_classes">10. Net Classes &amp; BOM</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/PCB-Design-with-KiCad/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/PCB-Design-with-KiCad/docs/category/project-stm32"><span itemprop="name">Project: STM32</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">4. RF Section Design</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>4. RF Section Design</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="41-impedance-matching-network">4.1 Impedance Matching Network<a href="#41-impedance-matching-network" class="hash-link" aria-label="Direct link to 4.1 Impedance Matching Network" title="Direct link to 4.1 Impedance Matching Network">​</a></h2>
<p>The RF section of the STM32 WB55CEU microcontroller incorporates a meticulously designed impedance matching network to ensure optimal signal transmission between the RF output and the antenna interface. A π-type LC network is employed to achieve a 50 Ω impedance match, which is critical for maximizing power transfer and minimizing signal reflections. The design parameters and rationale are detailed below:</p>
<ul>
<li>
<p><strong>Component Values:</strong></p>
<ul>
<li>
<p><strong>C1:</strong> 0.8 pF, packaged in an 0402 footprint, utilizing a C0G dielectric with a tolerance of ±0.1 pF (Murata GJM1555C1H8R0BB01).</p>
</li>
<li>
<p><strong>L1:</strong> 2.7 nH, also in an 0402 package, with a tolerance of ±0.3 nH and a Self-Resonant Frequency (SRF) exceeding 6 GHz (TDK MLG1005S2N7BTD25).</p>
</li>
<li>
<p><strong>C2:</strong> 0.3 pF, packaged in an 0402 footprint, C0G dielectric with a tighter tolerance of ±0.05 pF (Johanson Technology 0403HPH-RW0R3C).</p>
</li>
</ul>
</li>
<li>
<p><strong>Design Rationale:</strong></p>
<p>The π-type LC network is engineered to achieve a conjugate match at the operating frequency of 2.45 GHz, compensating for the inherent output impedance of the STM32 WB55CEU microcontroller, which is 22 + j15 Ω. This matching is essential for minimizing the Voltage Standing Wave Ratio (VSWR) and ensuring efficient power transfer to the antenna.</p>
<p>Simulations conducted using Ansys HFSS confirm the effectiveness of the impedance matching network, demonstrating a return loss (S11) of ≤ –15 dB and an insertion loss (S21) of ≥ –0.5 dB. These metrics indicate a highly efficient match, with minimal signal reflection and acceptable signal attenuation, thereby ensuring robust RF performance.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="42-low-pass-filter-lpf">4.2 Low-Pass Filter (LPF)<a href="#42-low-pass-filter-lpf" class="hash-link" aria-label="Direct link to 4.2 Low-Pass Filter (LPF)" title="Direct link to 4.2 Low-Pass Filter (LPF)">​</a></h2>
<p>To suppress harmonics and maintain signal integrity within the desired frequency band, a Low-Pass Filter (LPF) is integrated into the RF section. The selected component and its specifications are as follows:</p>
<ul>
<li>
<p><strong>Specifications:</strong></p>
<ul>
<li>
<p><strong>Cutoff Frequency:</strong> 2.5 GHz (3 dB point), effectively filtering out higher frequency harmonics.</p>
</li>
<li>
<p><strong>Attenuation:</strong> ≥ 30 dB at 4.8 GHz (second harmonic), ensuring compliance with regulatory standards and minimizing interference.</p>
</li>
<li>
<p><strong>Insertion Loss:</strong> ≤ 0.6 dB at 2.45 GHz, ensuring minimal signal degradation at the operating frequency.</p>
</li>
</ul>
</li>
<li>
<p><strong>Custom Footprint Design:</strong></p>
<ul>
<li>
<p><strong>Pad Dimensions:</strong> 0.3 × 0.25 mm, precisely matching TDK’s recommended land pattern to ensure reliable soldering and electrical connectivity.</p>
</li>
<li>
<p><strong>Via Fencing:</strong> An array of vias with a diameter of 0.2 mm spaced at 0.5 mm intervals surrounds the filter. This configuration provides ground isolation, reducing potential electromagnetic interference (EMI) and enhancing the filter’s effectiveness.</p>
</li>
<li>
<p><strong>3D Model Integration:</strong> STEP files sourced from TDK’s datasheet are imported into the PCB design software to validate component placement and ensure mechanical compatibility during assembly.</p>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="43-antenna-interface">4.3 Antenna Interface<a href="#43-antenna-interface" class="hash-link" aria-label="Direct link to 4.3 Antenna Interface" title="Direct link to 4.3 Antenna Interface">​</a></h2>
<p>The antenna interface is a critical component for effective wireless communication. The design utilizes a Hirose U.FL connector, optimized for high-frequency performance and mechanical stability.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="431-ufl-connector-implementation">4.3.1 UFL Connector Implementation<a href="#431-ufl-connector-implementation" class="hash-link" aria-label="Direct link to 4.3.1 UFL Connector Implementation" title="Direct link to 4.3.1 UFL Connector Implementation">​</a></h3>
<ul>
<li>
<p><strong>Hirose U.FL Series (UFL-LP-066):</strong></p>
<ul>
<li>
<p><strong>Impedance:</strong> 50 Ω, ensuring compatibility with the impedance-matched RF trace and the antenna.</p>
</li>
<li>
<p><strong>Bandwidth:</strong> 6 GHz, providing ample margin beyond the operational frequency of 2.45 GHz to accommodate signal integrity and reduce insertion loss.</p>
</li>
<li>
<p><strong>Footprint:</strong> Designed with a 1.6 × 1.2 mm pad area and a central signal pin with a diameter of 0.3 mm. This compact footprint facilitates efficient use of PCB real estate while maintaining robust electrical connections.</p>
</li>
</ul>
</li>
<li>
<p><strong>Ground Shielding:</strong></p>
<ul>
<li>
<p><strong>Copper Pour:</strong> A comprehensive ground plane is implemented beneath the U.FL connector, excluding a 0.5 mm keepout area around the signal pad. This configuration prevents unwanted coupling and maintains signal purity by providing a low-impedance return path.</p>
</li>
<li>
<p><strong>Via Array:</strong> An array of eight vias with a diameter of 0.2 mm and spaced at 0.5 mm intervals surrounds the connector. This arrangement ensures a reliable RF return path and enhances shielding effectiveness, thereby minimizing EMI and maintaining signal integrity.</p>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="44-pcb-layout-guidelines">4.4 PCB Layout Guidelines<a href="#44-pcb-layout-guidelines" class="hash-link" aria-label="Direct link to 4.4 PCB Layout Guidelines" title="Direct link to 4.4 PCB Layout Guidelines">​</a></h2>
<p>Adhering to stringent PCB layout guidelines is essential for maintaining high RF performance and compliance with electromagnetic compatibility (EMC) standards. The following guidelines outline the critical aspects of the PCB layout for the RF section:</p>
<ul>
<li>
<p><strong>Stackup:</strong></p>
<p>The PCB employs a 4-layer FR-4 stackup arranged as Top–Ground (GND)–Power (PWR)–Bottom. The dielectric thickness between layers is maintained at 0.2 mm using a prepreg material with a relative permittivity (εᵣ) of 4.3 and a loss tangent (tan δ) of 0.02 at 1 GHz. This configuration minimizes signal attenuation and preserves signal integrity across high-frequency traces.</p>
</li>
<li>
<p><strong>RF Trace Routing:</strong></p>
<ul>
<li>
<p><strong>Width:</strong> 0.3 mm, configured as a 50 Ω coplanar waveguide with a 0.15 mm gap to the ground plane. This design ensures controlled impedance, which is critical for high-frequency signal transmission.</p>
</li>
<li>
<p><strong>Length:</strong> Traces are minimized to less than 15 mm to limit phase shift (≤ 10° at 2.45 GHz) and reduce signal degradation.</p>
</li>
<li>
<p><strong>Bends:</strong> Implemented as 45° miters with a radius of at least three times the trace width (0.9 mm) to minimize reflections and maintain signal continuity.</p>
</li>
</ul>
</li>
<li>
<p><strong>Component Placement:</strong></p>
<ul>
<li>
<p><strong>π-Network and LPF Placement:</strong> Positioned within 5 mm of the RF output pin (PA0, pin 21) to reduce trace length and associated signal losses.</p>
</li>
<li>
<p><strong>Decoupling Capacitors:</strong> 100 nF capacitors are placed within 2 mm of the LPF’s VDD pin to ensure effective high-frequency noise suppression and maintain power integrity.</p>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="45-validation-and-testing">4.5 Validation and Testing<a href="#45-validation-and-testing" class="hash-link" aria-label="Direct link to 4.5 Validation and Testing" title="Direct link to 4.5 Validation and Testing">​</a></h2>
<p>Validation of the RF section design is imperative to ensure adherence to performance specifications and regulatory compliance. The following testing methodologies are employed:</p>
<ul>
<li>
<p><strong>Vector Network Analyzer (VNA):</strong></p>
<ul>
<li>
<p><strong>Measurements:</strong></p>
<ul>
<li>
<p><strong>S11 (Return Loss):</strong> Must be ≤ –10 dB within the 2.4–2.48 GHz frequency band, indicating efficient impedance matching and minimal signal reflection.</p>
</li>
<li>
<p><strong>S21 (Insertion Loss):</strong> Must be ≥ –1 dB, ensuring that signal transmission through the RF path remains efficient with minimal loss.</p>
</li>
</ul>
</li>
<li>
<p><strong>Tuning:</strong> The π-network is fine-tuned using a Smith chart to adjust the values of C1, L1, and C2, achieving the minimum S11 for optimal matching.</p>
</li>
</ul>
</li>
<li>
<p><strong>Spectrum Analyzer:</strong></p>
<ul>
<li><strong>Harmonic Suppression:</strong> Verification that harmonic frequencies, specifically the second harmonic at 4.8 GHz, are suppressed to ≤ –41 dBm. This ensures compliance with FCC Part 15.247 regulations and minimizes interference with other wireless systems.</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="46-critical-design-rules">4.6 Critical Design Rules<a href="#46-critical-design-rules" class="hash-link" aria-label="Direct link to 4.6 Critical Design Rules" title="Direct link to 4.6 Critical Design Rules">​</a></h2>
<p>Adherence to critical design rules is essential for ensuring the RF section&#x27;s functionality, reliability, and compliance with industry standards. The following design rules are strictly enforced:</p>
<ul>
<li>
<p><strong>Clearance:</strong></p>
<ul>
<li>
<p><strong>RF Trace to Digital Signals:</strong> A minimum clearance of three times the trace width (0.9 mm) is maintained to prevent electromagnetic coupling between RF and digital signals, thereby reducing the risk of signal interference and maintaining signal integrity.</p>
</li>
<li>
<p><strong>UFL Connector to Board Edge:</strong> A clearance of at least 5 mm from the UFL connector to the board edge is enforced to ensure mechanical stability and prevent accidental damage or disconnections.</p>
</li>
</ul>
</li>
<li>
<p><strong>Thermal Management:</strong></p>
<ul>
<li>
<p><strong>Reflow Profile:</strong> The soldering process adheres to a reflow profile with a peak temperature of 245°C and maintains 60 seconds above 217°C. This profile is optimized for SAC305 solder to ensure reliable solder joints without compromising component integrity.</p>
</li>
<li>
<p><strong>Thermal Relief:</strong> Ground pads for inductors are connected to the ground plane via 0.3 mm thermal spokes. This design mitigates soldering stress by providing controlled thermal pathways, preventing thermal gradients that could lead to mechanical stress or solder joint failures.</p>
</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>The RF section design of the STM32 WB55CEU microcontroller is meticulously crafted to adhere to IPC-2221B standards and STM32 AN5165 guidelines, ensuring robust Bluetooth Low Energy (BLE) performance with minimal electromagnetic interference (EMI) and electromagnetic compatibility (EMC) risks. By implementing precise impedance matching, effective harmonic suppression, and adhering to stringent PCB layout guidelines, the RF section achieves high signal integrity and regulatory compliance. The comprehensive validation and adherence to critical design rules further guarantee reliable and efficient wireless communication in advanced embedded applications.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/CagriCatik/PCB-Design-with-KiCad/tree/edit/main/webpage/docs/09_projects/05_project-stm32/04_rf_design.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/PCB-Design-with-KiCad/docs/projects/project-stm32/stm32"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">3. STM32 WB55 Microcontroller Power Architecture</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/PCB-Design-with-KiCad/docs/projects/project-stm32/oscillator"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">5. Oscillators</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#41-impedance-matching-network" class="table-of-contents__link toc-highlight">4.1 Impedance Matching Network</a></li><li><a href="#42-low-pass-filter-lpf" class="table-of-contents__link toc-highlight">4.2 Low-Pass Filter (LPF)</a></li><li><a href="#43-antenna-interface" class="table-of-contents__link toc-highlight">4.3 Antenna Interface</a><ul><li><a href="#431-ufl-connector-implementation" class="table-of-contents__link toc-highlight">4.3.1 UFL Connector Implementation</a></li></ul></li><li><a href="#44-pcb-layout-guidelines" class="table-of-contents__link toc-highlight">4.4 PCB Layout Guidelines</a></li><li><a href="#45-validation-and-testing" class="table-of-contents__link toc-highlight">4.5 Validation and Testing</a></li><li><a href="#46-critical-design-rules" class="table-of-contents__link toc-highlight">4.6 Critical Design Rules</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">PCB Design with KiCad</div></div></div></footer></div>
</body>
</html>